<!doctype html><html lang=en-us>
<head>
<title>Making a Phoniebox // Michael Freedman</title>
<link rel="shortcut icon" href=/favicon.ico>
<meta charset=utf-8>
<meta name=generator content="Hugo 0.92.1">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=author content="John Doe">
<meta name=description content>
<link rel=stylesheet href=https://mjfreedman.com/css/main.min.88e7083eff65effb7485b6e6f38d10afbec25093a6fac42d734ce9024d3defbd.css>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Making a Phoniebox">
<meta name=twitter:description content="A Phoniebox is a music Jukebox that plays songs when RFID cards are swiped near it.
References  Phoniebox installation log · GitHub [Tutorial] Phoniebox Reddit - Finished MusicBox Reddit - RFID Music Box V3 Phoniebox GitHub - MiczFlor/RPi-Jukebox-RFID Installing Phoniebox future3 — RPi Jukebox RFID 3.1.0 documentation  Installation 1. Download Raspbian Buster Lite from https://www.raspberrypi.org/downloads/raspbian/ , using the ZIP download link.
2. Flash an SD card  Use Etcher to flash SD Card with Buster image Take out SD card, put it back in  3.">
<meta property="og:title" content="Making a Phoniebox">
<meta property="og:description" content="A Phoniebox is a music Jukebox that plays songs when RFID cards are swiped near it.
References  Phoniebox installation log · GitHub [Tutorial] Phoniebox Reddit - Finished MusicBox Reddit - RFID Music Box V3 Phoniebox GitHub - MiczFlor/RPi-Jukebox-RFID Installing Phoniebox future3 — RPi Jukebox RFID 3.1.0 documentation  Installation 1. Download Raspbian Buster Lite from https://www.raspberrypi.org/downloads/raspbian/ , using the ZIP download link.
2. Flash an SD card  Use Etcher to flash SD Card with Buster image Take out SD card, put it back in  3.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://mjfreedman.com/post/making-a-phoniebox/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2021-12-23T11:35:06-05:00">
<meta property="article:modified_time" content="2021-12-23T11:35:06-05:00">
</head>
<body>
<header class=app-header>
<a href=https://mjfreedman.com><img class=app-header-avatar src=/images/avatar.jpg alt="John Doe"></a>
<h1>Michael Freedman</h1>
<p>Director, Strategy at VMware Tanzu Labs</p>
<div class=app-header-social>
<a href=https://github.com/mikfreedman target=_blank rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>Github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a>
<a href=https://www.linkedin.com/in/michaelfreedman/ target=_blank rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-linkedin"><title>LinkedIn</title><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
</a>
</div>
</header>
<main class=app-container>
<article class=post>
<header class=post-header>
<h1 class=post-title>Making a Phoniebox</h1>
<div class=post-meta>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
Dec 23, 2021
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
2 min read
</div>
</div>
</header>
<div class=post-content>
<p>A <a href=http://phoniebox.de/index-en.html>Phoniebox</a> is a music Jukebox that plays songs when RFID cards are swiped near it.</p>
<h1 id=references>References</h1>
<ul>
<li><a href=https://gist.github.com/marians/95997ae0d83eef688ed9ff5c9cf44b6b>Phoniebox installation log · GitHub</a></li>
<li><a href=https://koboldimkopf.wordpress.com/2020/01/10/tutorial-phoniebox/>[Tutorial] Phoniebox</a></li>
<li><a href=https://www.reddit.com/r/RASPBERRY_PI_PROJECTS/comments/9v7h4x/finished_rfid_musicbox_for_the_kids_based_on/>Reddit - Finished MusicBox</a></li>
<li><a href=https://www.reddit.com/r/RASPBERRY_PI_PROJECTS/comments/as2pqh/finished_rfid_music_box_v3_phoniebox/>Reddit - RFID Music Box V3 Phoniebox</a></li>
<li><a href=https://github.com/MiczFlor/RPi-Jukebox-RFID>GitHub - MiczFlor/RPi-Jukebox-RFID</a></li>
<li><a href=https://rpi-jukebox-rfid.readthedocs.io/en/latest/install.html>Installing Phoniebox future3 — RPi Jukebox RFID 3.1.0 documentation</a></li>
</ul>
<h1 id=installation>Installation</h1>
<h2 id=1-download-raspbian-buster-lite>1. Download Raspbian Buster Lite</h2>
<p>from <a href=https://www.raspberrypi.org/downloads/raspbian/>https://www.raspberrypi.org/downloads/raspbian/</a> , using the ZIP download link.</p>
<h2 id=2-flash-an-sd-card>2. Flash an SD card</h2>
<ol>
<li>Use Etcher to flash SD Card with Buster image</li>
<li>Take out SD card, put it back in</li>
</ol>
<h2 id=3-modify-wifi-settings>3. Modify Wifi settings</h2>
<ol>
<li>Open SD card partition &ldquo;boot&rdquo;</li>
<li>Create file <code>ssh</code></li>
<li>Create file <code>wpa_supplicant.conf</code> as described in <a href=https://www.raspberrypi-spy.co.uk/2017/04/manually-setting-up-pi-wifi-using-wpa_supplicant-conf/>https://www.raspberrypi-spy.co.uk/2017/04/manually-setting-up-pi-wifi-using-wpa_supplicant-conf/</a></li>
</ol>
<h2 id=4-boot-the-raspi>4. Boot the Raspi</h2>
<ol>
<li>Insert the card</li>
<li>Plug in the card reader</li>
<li>Plug in the USB audio device (optional)</li>
<li>Plugin monitor and keyboard (optional)</li>
</ol>
<h2 id=5-connect-via-ssh--bootstrap-machine>5. Connect via SSH & Bootstrap Machine</h2>
<ol>
<li>Find IP address via router admin UI</li>
<li>Connect: <code>ssh pi@&lt;ip-address></code></li>
<li>Create <code>.ssh/authorized_keys</code> and add own public RSA key</li>
<li>Change password for pi user using <code>passwd</code></li>
<li>Setup private key access</li>
<li>Disable Password authentication for ssh in <code>/etc/sshd_config</code></li>
<li><a href=https://www.tomshardware.com/how-to/raspberry-pi-change-hostname>Set Hostname</a></li>
</ol>
<h2 id=7-get-sound-device-info>7. Get sound device info</h2>
<ol>
<li>Setup DT Overlay for HiFiBerry MiniAmp</li>
</ol>
<pre tabindex=0><code>#/boot/config.txt
dtoverlay=hifiberry-dac
</code></pre><pre tabindex=0><code>#/etc/asound.conf
pcm.hifiberry {
    type softvol
    slave.pcm &quot;plughw:0&quot;
    control.name &quot;Master&quot;
    control.card 0
}
pcm.!default {
    type plug
    slave.pcm &quot;hifiberry&quot;
}
</code></pre><ol start=2>
<li>Reboot</li>
</ol>
<p>Use this info in the next step.</p>
<h2 id=6-start-phoniebox-install-script>6. Start Phoniebox install script</h2>
<p>From <a href=https://github.com/MiczFlor/RPi-Jukebox-RFID/wiki/INSTALL-stretch#one-line-install-command>https://github.com/MiczFlor/RPi-Jukebox-RFID/wiki/INSTALL-stretch#one-line-install-command</a></p>
<pre tabindex=0><code>rm buster-install-*
wget https://raw.githubusercontent.com/MiczFlor/RPi-Jukebox-RFID/master/scripts/installscripts/buster-install-default.sh
chmod +x buster-install-default.sh
./buster-install-default.sh
</code></pre><p>Follow the interactive prompt.</p>
<p>If you are connected via Wifi already, skip the Wifi setup.</p>
<p>WiFi -> n</p>
<p>PCM as iFace -> no, should be „Master“ (if you use a HiFiBerry MiniAmp)</p>
<p>mpd -> y</p>
<p>default locations -> y</p>
<p>Start the first part of the installation with another y and wait some time.</p>
<h2 id=7-connect-to-the-web-ui>7. Connect to the web UI</h2>
<ol>
<li>Use <code>ifconfig | grep inet</code> to find the Raspi&rsquo;s IP address.</li>
<li>In a browser, connect to <code>http://&lt;ip-address>/</code> to open the Phoniebox web UI.</li>
</ol>
<h2 id=8-upload-music>8. Upload music</h2>
<ol>
<li>Have some MP3 files ready</li>
<li>Go to &ldquo;Folders & Files&rdquo; to upload music files into new folders</li>
</ol>
<h2 id=9-test-audio-playback>9. Test audio playback</h2>
<ol>
<li>maybe disable <code>mpd</code> if it doesn&rsquo;t work right?</li>
</ol>
<pre tabindex=0><code>sudo systemctl disable mpd
</code></pre>
</div>
<div class=post-footer>
</div>
</article>
</main>
</body>
</html>